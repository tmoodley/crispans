(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{143:function(e,t,r){"use strict";r.r(t);var s=r(47),a=r.n(s),o=r(1),i=r.n(o),c=r(34);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}var u={data:function(){return{email:JSON.parse(localStorage.getItem("user")).username,loading:!1,purchaseOrder:{PurchaseDate:"",DeliveryDate:"",Notes:"",PurchaseOrderNumber:"",CustomerId:"",email:JSON.parse(localStorage.getItem("user")).username,Status:"",SubTotal:0,Tax:0,Total:0,PurchaseOrderItems:[{Item:"",Description:"",Quantity:0,Amount:0}]}}},methods:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(c.mapActions)("company",["getCompany"]),{save:function(){event.preventDefault();var e=this;return this.purchaseOrder.CustomerId=this.store.company.id,i.a.post("/api/purchaseorders/",e.purchaseOrder).then((function(t){e.purchaseOrder=t.data}))},onComplete:function(){var e=this;this.save().then((function(){e.$swal.fire("Saved","Job Saved","success").then((function(){e.$router.push({path:"/purchaseorders/manage/"+e.purchaseOrder.id})}))}))},addLine:function(){this.purchaseOrder.PurchaseOrderItems.push({Item:"",Description:"",Quantity:0,Amount:0})},addTotal:function(){var e=this;this.purchaseOrder.PurchaseOrderItems.map((function(t){e.purchaseOrder.Total+=t.quantity*t.amount}))},removeLine:function(e){var t=this.purchaseOrder.PurchaseOrderItems.indexOf(e);e>-1&&this.purchaseOrder.PurchaseOrderItems.splice(t,1)}}),created:function(){this.debouncedGetAnswer=_.debounce(this.addTotal,500)},mounted:function(){this.getCompany(this.email)},computed:Object(c.mapState)({store:function(e){return e.company}})},l=r(28),d=Object(l.a)(u,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Create")]),e._v(" "),r("h4",[e._v("Purchase Order")]),e._v(" "),r("hr"),e._v(" "),r("form",{on:{submit:e.onComplete}},[e._m(0),e._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label",attrs:{for:"PurchaseDate"}},[e._v("Purchase Date")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.purchaseOrder.PurchaseDate,expression:"purchaseOrder.PurchaseDate"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:e.purchaseOrder.PurchaseDate},on:{input:function(t){t.target.composing||e.$set(e.purchaseOrder,"PurchaseDate",t.target.value)}}})])]),e._v(" "),r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label",attrs:{for:"DeliveryDate"}},[e._v("Delivery Date")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.purchaseOrder.DeliveryDate,expression:"purchaseOrder.DeliveryDate"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:e.purchaseOrder.DeliveryDate},on:{input:function(t){t.target.composing||e.$set(e.purchaseOrder,"DeliveryDate",t.target.value)}}})])]),e._v(" "),r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label",attrs:{for:"PurchaseOrderNumber"}},[e._v("Purchase Order Number")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.purchaseOrder.PurchaseOrderNumber,expression:"purchaseOrder.PurchaseOrderNumber"}],staticClass:"form-control",domProps:{value:e.purchaseOrder.PurchaseOrderNumber},on:{input:function(t){t.target.composing||e.$set(e.purchaseOrder,"PurchaseOrderNumber",t.target.value)}}})])])]),e._v(" "),e._m(1),e._v(" "),e._l(e.purchaseOrder.PurchaseOrderItems,(function(t,s){return r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3"},[r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.item,expression:"item.item"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Item"},domProps:{value:t.item},on:{input:function(r){r.target.composing||e.$set(t,"item",r.target.value)}}})])]),e._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"item.description"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Description"},domProps:{value:t.description},on:{input:function(r){r.target.composing||e.$set(t,"description",r.target.value)}}})])]),e._v(" "),r("div",{staticClass:"col-md-2"},[r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"item.quantity"}],staticClass:"form-control input_height",attrs:{type:"number",placeholder:"Quantity"},domProps:{value:t.quantity},on:{input:function(r){r.target.composing||e.$set(t,"quantity",r.target.value)}}})])]),e._v(" "),r("div",{staticClass:"col-md-2"},[r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"item.amount"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Price"},domProps:{value:t.amount},on:{change:function(t){return e.debouncedGetAnswer()},input:function(r){r.target.composing||e.$set(t,"amount",r.target.value)}}})])]),e._v(" "),r("div",{staticClass:"col-md-1"},[t.amount>0?r("div",{staticClass:"form-group"},[e._v("\n        "+e._s(e._f("currency")(t.amount*t.quantity))+"\n      ")]):e._e(),e._v(" "),r("i",{staticClass:"fa fa-minus-circle",on:{click:function(t){return e.removeLine(s)}}})])])})),e._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("i",{staticClass:"fa fa-plus-circle",on:{click:function(t){return e.addLine()}}},[e._v(" Add New Line")])])]),e._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-8 total-footer"},[r("div",{staticClass:"total-footer__notes grid-5 grid-item"},[r("label",{staticClass:"control-label",attrs:{for:"notes"}},[e._v("Notes / Memo")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.purchaseOrder.Notes,expression:"purchaseOrder.Notes"}],staticClass:"form-control",attrs:{name:"notes",id:"notes"},domProps:{value:e.purchaseOrder.Notes},on:{input:function(t){t.target.composing||e.$set(e.purchaseOrder,"Notes",t.target.value)}}})])]),e._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"summary-grid"},[r("div",{staticClass:"summary-total"},[r("h5",{staticClass:"total-label"},[e._v("\n              Total\n            ")]),e._v(" "),r("span",{staticClass:"PurchaseOrderTotal",attrs:{id:"Total"}},[e._v(e._s(e._f("currency")(e.purchaseOrder.Total)))])])]),e._v(" "),r("div",{staticClass:"form-group"},[r("input",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"Create",disabled:0==e.purchaseOrder.PurchaseOrderItems.length}})])])])],2)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-9 pull-left"},[t("span",[this._v("Enter the details for your order")])]),this._v(" "),t("div",{staticClass:"col-md-3 pull-right"},[t("span",[this._v("STEP 1 OF 2")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-9 pull-left"},[t("span",[this._v("Enter the items you wish to order")])]),this._v(" "),t("div",{staticClass:"col-md-3 pull-right"},[t("span",[this._v("STEP 2 OF 2")])])])}],!1,null,null,null);t.default=d.exports}}]);