(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{143:function(t,e,r){"use strict";r.r(e);var s=r(47),a=r.n(s),i=r(1),o=r.n(i),c=r(34);function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,s)}return r}var u={data:function(){return{email:_user,loading:!1,purchaseOrder:{PurchaseDate:"",DeliveryDate:"",Notes:"",PurchaseOrderNumber:"",CustomerId:"",Email:_user,Status:"",SubTotal:0,Tax:0,Total:0,PurchaseOrderItems:[{Item:"",Description:"",Quantity:0,Amount:0}]}}},methods:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){a()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(c.mapActions)("company",["getCompany"]),{save:function(){event.preventDefault();var t=this;return this.purchaseOrder.CustomerId=this.store.company.id,o.a.post("/api/purchaseorders/",t.purchaseOrder).then((function(e){t.purchaseOrder=e.data}))},onComplete:function(){var t=this;this.save().then((function(){t.$swal.fire("Saved","Job Saved","success").then((function(){t.$router.push({path:"/purchaseorders/manage/"+t.purchaseOrder.id})}))}))},addLine:function(){this.purchaseOrder.PurchaseOrderItems.push({Item:"",Description:"",Quantity:0,Amount:0})},addTotal:function(){var t=this;this.purchaseOrder.PurchaseOrderItems.map((function(e){t.purchaseOrder.Total+=e.quantity*e.amount}))},removeLine:function(t){var e=this.purchaseOrder.PurchaseOrderItems.indexOf(t);t>-1&&this.purchaseOrder.PurchaseOrderItems.splice(e,1)}}),created:function(){this.debouncedGetAnswer=_.debounce(this.addTotal,500)},mounted:function(){this.getCompany(this.email)},computed:Object(c.mapState)({store:function(t){return t.company}})},l=r(28),d=Object(l.a)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",[t._v("Create")]),t._v(" "),r("h4",[t._v("Purchase Order")]),t._v(" "),r("hr"),t._v(" "),r("form",{on:{submit:t.onComplete}},[t._m(0),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label",attrs:{for:"PurchaseDate"}},[t._v("Purchase Date")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.purchaseOrder.PurchaseDate,expression:"purchaseOrder.PurchaseDate"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.purchaseOrder.PurchaseDate},on:{input:function(e){e.target.composing||t.$set(t.purchaseOrder,"PurchaseDate",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label",attrs:{for:"DeliveryDate"}},[t._v("Delivery Date")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.purchaseOrder.DeliveryDate,expression:"purchaseOrder.DeliveryDate"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.purchaseOrder.DeliveryDate},on:{input:function(e){e.target.composing||t.$set(t.purchaseOrder,"DeliveryDate",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"col-md-6"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"control-label",attrs:{for:"PurchaseOrderNumber"}},[t._v("Purchase Order Number")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.purchaseOrder.PurchaseOrderNumber,expression:"purchaseOrder.PurchaseOrderNumber"}],staticClass:"form-control",domProps:{value:t.purchaseOrder.PurchaseOrderNumber},on:{input:function(e){e.target.composing||t.$set(t.purchaseOrder,"PurchaseOrderNumber",e.target.value)}}})])])]),t._v(" "),t._m(1),t._v(" "),t._l(t.purchaseOrder.PurchaseOrderItems,(function(e,s){return r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3"},[r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.item,expression:"item.item"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Item"},domProps:{value:e.item},on:{input:function(r){r.target.composing||t.$set(e,"item",r.target.value)}}})])]),t._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"item.description"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Description"},domProps:{value:e.description},on:{input:function(r){r.target.composing||t.$set(e,"description",r.target.value)}}})])]),t._v(" "),r("div",{staticClass:"col-md-2"},[r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"item.quantity"}],staticClass:"form-control input_height",attrs:{type:"number",placeholder:"Quantity"},domProps:{value:e.quantity},on:{input:function(r){r.target.composing||t.$set(e,"quantity",r.target.value)}}})])]),t._v(" "),r("div",{staticClass:"col-md-2"},[r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.amount,expression:"item.amount"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Price"},domProps:{value:e.amount},on:{change:function(e){return t.debouncedGetAnswer()},input:function(r){r.target.composing||t.$set(e,"amount",r.target.value)}}})])]),t._v(" "),r("div",{staticClass:"col-md-1"},[e.amount>0?r("div",{staticClass:"form-group"},[t._v("\n        "+t._s(t._f("currency")(e.amount*e.quantity))+"\n      ")]):t._e(),t._v(" "),r("i",{staticClass:"fa fa-minus-circle",on:{click:function(e){return t.removeLine(s)}}})])])})),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("i",{staticClass:"fa fa-plus-circle",on:{click:function(e){return t.addLine()}}},[t._v(" Add New Line")])])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-8 total-footer"},[r("div",{staticClass:"total-footer__notes grid-5 grid-item"},[r("label",{staticClass:"control-label",attrs:{for:"notes"}},[t._v("Notes / Memo")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.purchaseOrder.Notes,expression:"purchaseOrder.Notes"}],staticClass:"form-control",attrs:{name:"notes",id:"notes"},domProps:{value:t.purchaseOrder.Notes},on:{input:function(e){e.target.composing||t.$set(t.purchaseOrder,"Notes",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"summary-grid"},[r("div",{staticClass:"summary-total"},[r("h5",{staticClass:"total-label"},[t._v("\n              Total\n            ")]),t._v(" "),r("span",{staticClass:"PurchaseOrderTotal",attrs:{id:"Total"}},[t._v(t._s(t._f("currency")(t.purchaseOrder.Total)))])])]),t._v(" "),r("div",{staticClass:"form-group"},[r("input",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"Create",disabled:0==t.purchaseOrder.PurchaseOrderItems.length}})])])])],2)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-9 pull-left"},[e("span",[this._v("Enter the details for your order")])]),this._v(" "),e("div",{staticClass:"col-md-3 pull-right"},[e("span",[this._v("STEP 1 OF 2")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-9 pull-left"},[e("span",[this._v("Enter the items you wish to order")])]),this._v(" "),e("div",{staticClass:"col-md-3 pull-right"},[e("span",[this._v("STEP 2 OF 2")])])])}],!1,null,null,null);e.default=d.exports}}]);